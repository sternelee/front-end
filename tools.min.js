'use strict';

var UA = navigator.userAgent.toLocaleLowerCase();

var isMobile = /mobile|android|iphone|ipad|iemobile/i.test(UA);

var isXlPC = /[ ]thunder\/[\d.]*/.test(UA) || !!window.native && !isMobile;

var isXlMB = /thunder/.test(UA) && isMobile;

var isXl9 = /[ ]thunder\/10.0([\d.]*)/.test(UA) || /[ ]thunder\/9.([\d.]*)/.test(UA);

var isXlx = /[ ]thunder\/10.1([\d.]*)/.test(UA) || !/thunder/.test(UA) && !!window.native;

var isXdas = /[ ]thunderx[/ ]*[\d.]*/.test(UA);

var isWeixin = /micromessenger/.test(UA);

// const CheckBrowserTypes = ['msie', 'electron', 'thunder', 'micromessenger', '360', 'mqqbrowser', 'qqbrowser', 'ubrowser', 'metasr', 'edge', 'firefox', 'maxthon', '2345explorer', 'lbbrowser', 'android.thunder', 'ios.thunder', 'chrome']
// const CheckBrowser = ['IE', '迅雷X', '迅雷', '微信', '360浏览器', '手机QQ浏览', 'QQ浏览器', 'UC浏览器', '搜狗浏览器', 'Edge浏览器', '火狐', '遨游', '2345', '猎豹', '安卓手雷', '苹果手雷', 'Chrome']
var CheckBrowserTypes = ['Trident', 'Electron', 'Thunder', 'MicroMessenger', '360', 'QQBrowser', 'UBrowser', 'Metasr', 'Edge', 'Firefox', 'Maxthon', 'Android.Thunder', 'Ios.Thunder', 'Chrome'];

// 根据mimeTypes来判断360
var mimeTypes = function mimeTypes(option, value) {
    var mimeTypes = navigator.mimeTypes;
    for (var mt in mimeTypes) {
        if (mimeTypes[mt][option] == value) {
            return true;
        }
    }
    return false;
};
var _BrowserType = function () {
    for (var len = CheckBrowserTypes.length - 1, i = 0; i <= len; i++) {
        var u = CheckBrowserTypes[i];
        if (u === '360') {
            if (mimeTypes('type', 'application/vnd.chromium.remoting-viewer')) return u;else continue;
        }
        if (UA.indexOf(u.toLowerCase()) > -1) return u;else continue;
    }
    return 'unknown';
}();

var BrowserType = function () {
    var Platfrom = isMobile ? 'Mobile-' : 'PC-';
    var Type = _BrowserType == 'Trident' ? 'IE' : _BrowserType;
    return Platfrom + Type;
}();

var BrowserVersion = function () {
    var type = _BrowserType.toLowerCase();
    if (type.indexOf('unknown') > 0) return 'unknown';
    if (type == 'trident') {
        if (UA.indexOf('gecko')) return 'IE/11';else return 'IE/' + UA.match(/msie (\d+)/)[1];
    }
    if (type == '360') type = 'chrome';
    type = type.toLowerCase()
    var reg = new RegExp(type + '[ /][\\d.]+');
    return UA.match(reg)[0];
}();

document.body.innerHTML = BrowserType + '               <br/><br/>' + BrowserVersion;